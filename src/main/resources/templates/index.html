<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>EtherJSON</title>
    <script src="js/jquery.js"></script>
    <script src="js/processing.js"></script>
    <script src="js/typed.js"></script>
    <link type="text/css" href="css/bulma.css" rel="stylesheet" />
    <style>
        .typed-cursor {
            opacity: 1;
            -webkit-animation: blink 0.7s infinite;
            -moz-animation: blink 0.7s infinite;
            animation: blink 0.7s infinite;
        }

        @keyframes blink {
            0% {
                opacity: 1;
            }
            50% {
                opacity: 0;
            }
            100% {
                opacity: 1;
            }
        }

        @-webkit-keyframes blink {
            0% {
                opacity: 1;
            }
            50% {
                opacity: 0;
            }
            100% {
                opacity: 1;
            }
        }

        @-moz-keyframes blink {
            0% {
                opacity: 1;
            }
            50% {
                opacity: 0;
            }
            100% {
                opacity: 1;
            }
        }
    </style>
</head>

<body>

<section class="hero is-info is-large">
    <!-- Hero header: will stick at the top -->
    <div class="hero-head">
        <header class="nav">
            <div class="container">
                <div class="nav-right nav-menu">
                    <a class="nav-item is-active">
                        Home
                    </a>
                    <a class="nav-item">
                        Examples
                    </a>
                    <a class="nav-item">
                        Documentation
                    </a>
                    <span class="nav-item">
            <a class="button is-info is-inverted">
              <span class="icon">
                <!-- <i class="fa fa-github"></i> -->
              </span>
                        <span>Download</span>
                        </a>
                        </span>
                </div>
            </div>
        </header>
    </div>

    <!-- Hero content: will be in the middle -->
    <div class="hero-body">
        <div class="container has-text-centered">
            <h1 class="title">
                <span id="t1"></span>
            </h1>
            <h2 class="subtitle">

            </h2>
        </div>
    </div>

    <!-- Hero footer: will stick at the bottom -->
    <div class="hero-foot">
        <nav class="tabs is-boxed is-fullwidth">
            <div class="container">
                <ul>
                    <li class="is-active"><a>Overview</a></li>
                    <li><a>Maze</a></li>
                    <li><a>JSON</a></li>
                </ul>
            </div>
        </nav>
    </div>
</section>

<div class="box">
    <div class="content ">
        <div class="control has-addons has-addons-centered">
            <input id="row" class="input" type="text" placeholder="Rank">
            <a id="btn" class="button is-info">Generate</a>
        </div>
        <div class="control has-addons has-addons-centered">
            <canvas id="mycanvas"></canvas>
        </div>
    </div>
</div>

<footer class="footer">
    <div class="container">
        <div class="content has-text-centered">
            <p>
                <strong>EtherJSON</strong> by <a href="https://github.com/w-zx">Arthur Wang</a>. The source code is licensed
                <a href="http://opensource.org/licenses/mit-license.php">MIT</a>. The website content is licensed <a href="http://creativecommons.org/licenses/by-nc-sa/4.0/">CC ANS 4.0</a>.
            </p>
            <p>

            </p>
        </div>
    </div>
</footer>

<script>
        var pageurl = window.location.href;
        $(function() {
            $("#t1").typed({
                strings: ["Generate and solve maze"],
                typeSpeed: 50
            });
        });
        $("#btn").click(function(e) {
            rows = $("#row").val();
            //cols = $("#col").val();
            $.ajax({
                url: pageurl + "maze",
                type: "POST",
                data: {
                    "rows": rows,
                    "cols": rows,
                },
                success: function(data) {
                    Processing.instances[0].maze(data);
                }
            });
        })

        $('input').keypress(function(e) {
            if (e.which == 13) {
                $('#btn').click();
                return false;
            }
        });
    </script>
<script type="text/processing" data-processing-target="mycanvas">
void setup() {
    border = 301;
    size(border, border);
    background(255);
}
void maze(g) {
    background(255);
    rows = $("#row").val() || 15;
    //cols = $("#col").val() || 15;
    cols = rows;
    step = (width-1)/rows;

    stroke(137, 194, 148, 50);
    for(int i=0;i<=width-1;) {
        line(i,0,i,width-1);
        line(0,i,width-1,i);
        i+=step;
    }

    stroke(0);
    for(int i=0;i<=rows-1;i++) {
        for(int j=0;j<=rows-1;j++) {
            if((g[i][j] & 1) == 0) {
                line(step*j,step*i,step*(j+1),step*i);
            }
            if((g[i][j] & 2) == 0) {
                line(step*j,step*(i+1),step*(j+1),step*(i+1));
            }
            if((g[i][j] & 4) == 0) {
                line(step*(j+1),step*i,step*(j+1),step*(i+1));
            }
            if((g[i][j] & 8) == 0) {
                line(step*j,step*i,step*j,step*(i+1));
            }
        }
    }
}
</script>
</body>
</html>
